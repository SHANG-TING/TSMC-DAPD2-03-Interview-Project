import{$a as ee,Ba as m,Da as N,Ea as B,Fa as q,Ga as p,Ha as k,Ia as J,Ja as P,Ka as R,La as O,Ma as b,Na as y,Oa as c,Pa as X,Qa as Y,Ra as T,Sa as l,Ta as K,Ua as Z,V as w,Va as Q,Wa as z,Xa as W,Z as f,_a as u,a as C,ab as te,b as $,c as D,d as I,e as U,ea as S,f as E,fa as F,ga as H,hb as ie,ka as A,ra as j,ta as g,ub as ne,vb as oe,wb as x}from"./chunk-EWDLBO2G.js";var se=(e,t)=>({$implicit:e,i:t});function ae(e,t){e&1&&X(0)}function pe(e,t){if(e&1&&m(0,ae,1,0,"ng-container",0),e&2){let n=l();p("ngTemplateOutlet",n.gridboxComponent.widgetTemplateRef)("ngTemplateOutletContext",ee(2,se,n.widget,n.index))}}var V=(()=>{let t=class t{constructor(){this.gridboxComponent=w(M)}ngOnInit(){this.updateItemStyle()}ngOnChanges(i){"widget"in i&&this.updateItemStyle()}updateItemStyle(){let i=this.gridboxComponent.columnWidthUnit,{top:s,left:d,height:G,width:o}=this.widget.position;this.transform=`translate3d(${i*d}px, ${50*s}px, 0px)`,this.width=i*o,this.height=50*G}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=f({type:t,selectors:[["app-gridbox-item"]],hostVars:6,hostBindings:function(s,d){s&2&&k("transform",d.transform)("width",d.width,"px")("height",d.height,"px")},inputs:{index:"index",widget:"widget"},standalone:!0,features:[S,u],decls:1,vars:1,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,d){s&1&&m(0,pe,1,5,"ng-container"),s&2&&J(0,d.gridboxComponent.widgetTemplateRef?0:-1)},dependencies:[x,oe],styles:["[_nghost-%COMP%]{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;background:#fff;-webkit-user-select:text;user-select:text}"],changeDetection:0});let e=t;return e})();var ge=["widget"],me=(e,t)=>t.id;function ce(e,t){if(e&1&&c(0,"div",0),e&2){let n=t.$index,i=l();p("ngStyle",i.getGridColumnStyle(n))}}function he(e,t){if(e&1&&c(0,"div",1),e&2){let n=t.$index,i=l();p("ngStyle",i.getGridRowStyle(n))}}function fe(e,t){if(e&1&&c(0,"app-gridbox-item",2),e&2){let n=t.$implicit;p("widget",n),q("id",n.id)}}var M=(()=>{var t,n,i,L;let d=class d{constructor(){I(this,i);I(this,t,void 0);I(this,n,void 0);this.config={widgets:[]},this.gridColumns=Array(12),this.gridRows=[],U(this,t,w(A)),U(this,n,w(ie))}onResize(){E(this,i,L).call(this),this.gridboxItemComponents?.forEach(o=>o.updateItemStyle())}get columnWidthUnit(){return D(this,t).nativeElement.clientWidth/this.gridColumns.length}ngOnChanges(o){"config"in o&&E(this,i,L).call(this)}getGridColumnStyle(o){let r=this.columnWidthUnit;return{transform:`translateX(${o*r}px)`,height:`${this.gridRows.length*50}px`,width:`${r}}px`}}getGridRowStyle(o){let r=D(this,t).nativeElement;return C({transform:`translateY(${o*50}px)`,height:`${50}px`,width:`${r.clientWidth}px`},o%2===1&&{backgroundColor:"hsl(120deg 30.35% 39.41% / 18.04%)"})}};t=new WeakMap,n=new WeakMap,i=new WeakSet,L=function(){this.gridRows.length=Math.max(...this.config.widgets.map(({position:{top:o,height:r}})=>o+r)),this.height=this.gridRows.length*50,D(this,n).markForCheck()},d.\u0275fac=function(r){return new(r||d)},d.\u0275cmp=f({type:d,selectors:[["app-gridbox"]],contentQueries:function(r,a,_){if(r&1&&K(_,ge,5),r&2){let v;Q(v=z())&&(a.widgetTemplateRef=v.first)}},viewQuery:function(r,a){if(r&1&&Z(V,5),r&2){let _;Q(_=z())&&(a.gridboxItemComponents=_)}},hostVars:2,hostBindings:function(r,a){r&1&&T("resize",function(v){return a.onResize(v)},!1,j),r&2&&k("height",a.height,"px")},inputs:{config:"config"},standalone:!0,features:[S,u],decls:6,vars:0,consts:[[1,"gridbox-column",3,"ngStyle"],[1,"gridbox-row",3,"ngStyle"],[3,"widget"]],template:function(r,a){r&1&&(R(0,ce,1,1,"div",0,P),R(2,he,1,1,"div",1,P),R(4,fe,1,2,"app-gridbox-item",2,me)),r&2&&(O(a.gridColumns),g(2),O(a.gridRows),g(2),O(a.config.widgets))},dependencies:[x,ne,V],styles:["[_nghost-%COMP%]{position:relative;box-sizing:border-box;background:#e6f5eb;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}.gridbox-column[_ngcontent-%COMP%], .gridbox-row[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box}.gridbox-column[_ngcontent-%COMP%]{border-left:1px solid white;border-right:1px solid white}.gridbox-row[_ngcontent-%COMP%]{border-top:1px solid white;border-bottom:1px solid white}"],changeDetection:0});let e=d;return e})();var ue=()=>[import("./chunk-BQICYL6X.js").then(e=>e.TextWidgetComponent)],xe=()=>[import("./chunk-FESM4I7R.js").then(e=>e.GridWidgetComponent)];function _e(e,t){if(e&1&&c(0,"app-text-widget",4),e&2){let n=l().$implicit;p("data",n)}}function Ce(e,t){if(e&1&&c(0,"app-grid-widget",4),e&2){let n=l().$implicit;p("data",n)}}function we(e,t){if(e&1&&(m(0,_e,1,1),N(1,0,ue),m(3,Ce,1,1),N(4,3,xe)),e&2){let n=t.$implicit;g(),B(n.type==="text"),g(3),B(n.type==="grid")}}var qe=(()=>{let t=class t{constructor(){this.config={widgets:[{id:"widget-01",title:"Grid 1",type:"grid",position:{left:0,top:0,width:6,height:3},options:{headers:[{fieldId:"name",displayText:"User Name"},{fieldId:"role",displayText:"User Role"}],data:[{name:"Mike",role:"Engineer"}]}},{id:"widget-02",title:"Text 1",type:"text",position:{left:0,top:3,width:3,height:3},options:{content:"Hello World",color:"white",background:"#f00"}}]}}addGridWidget(){let i={id:"widget-03",title:"Grid 2",type:"grid",position:{left:6,top:3,width:6,height:4},options:{headers:[{fieldId:"name",displayText:"User Name"},{fieldId:"role",displayText:"User Role"}],data:[{name:"Jeff",role:"Engineer"},{name:"Declan",role:"Engineer"}]}};this.config.widgets.some(s=>s.id===i.id)||(this.config=$(C({},this.config),{widgets:[...this.config.widgets,i]}))}addTextWidget(){let i={id:"widget-04",title:"Text 2",type:"text",position:{left:6,top:7,width:3,height:3},options:{content:"Good night.",color:"yellow",background:"#666"}};this.config.widgets.some(s=>s.id===i.id)||(this.config=$(C({},this.config),{widgets:[...this.config.widgets,i]}))}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=f({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[u],decls:9,vars:1,consts:[["widget",""],["data-e2e-id","add-grid-widget-button",2,"margin","10px 0",3,"click"],["data-e2e-id","add-text-widget-button",2,"margin","10px 0",3,"click"],[3,"config"],[3,"data"]],template:function(s,d){if(s&1){let G=Y();b(0,"h2"),W(1,"dashboard works!"),y(),b(2,"button",1),T("click",function(){return F(G),H(d.addGridWidget())}),W(3," Add Grid Widget "),y(),b(4,"button",2),T("click",function(){return F(G),H(d.addTextWidget())}),W(5," Add Text Widget "),y(),b(6,"app-gridbox",3),m(7,we,6,2,"ng-template",null,0,te),y()}s&2&&(g(6),p("config",d.config))},dependencies:[x,M],styles:["[_nghost-%COMP%]{display:block;padding:15px}"],changeDetection:0});let e=t;return e})();export{qe as DashboardComponent};
